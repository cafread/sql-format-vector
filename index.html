<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <style>
      html,
      body {
        height: 100%;
        margin: 0;
        padding: 0;
        overflow: hidden;
      }
      main {
        overflow: hidden;
        display: flex;
        flex-direction: row;
        -webkit-align-items: stretch;
        align-items: stretch;
        height: calc(100% - 20px);
      }
      .input,
      .output {
        display: flex;
        -webkit-align-items: stretch;
        align-items: stretch;
        width: 50%;
        height: 100%;
      }
      .output {
        border-left: 2px solid #8dc63f;
      }
      textarea {
        width: 100%;
        padding: 20px;
        border: 0;
        box-sizing: border-box;
        resize: none;
        outline: none;
      }
    </style>
    <link rel="stylesheet" href="lib/codemirror.css">
    <script src="lib/codemirror.js"></script>
    <script src="lib/codemirror-sql.js"></script>
    <script type="text/javascript" src="constants.js"></script>
    <script type="text/javascript" src="sqlFormatter.js"></script>
  </head>
  <body>
    <main>
      <section class="input">
        <textarea id="input" autofocus="true" wrap="off">/* Paste your code here, or just start writing!*/
select * from sample;</textarea
        >
      </section>
      <section class="output">
        <textarea id="output" readonly="true" wrap="off">Formatted output will appear here</textarea>
      </section>
    </main>
    <script>
      window.input = CodeMirror.fromTextArea(document.getElementById('input'), {
        mode: 'text/x-pgsql',
        indentWithTabs: false,
        smartIndent: false,
        lineNumbers: true,
        matchBrackets : true,
        autofocus: false
      });
      window.output = CodeMirror.fromTextArea(document.getElementById('output'), {
        mode: 'text/x-pgsql',
        indentWithTabs: false,
        smartIndent: false,
        lineNumbers: true,
        matchBrackets : true,
        autofocus: false
      });
      function format() {
        let inp = input.doc.getValue();
        output.doc.setValue(sqlFormatter.format(inp, {language: 'sql', uppercase: true}));
      }
      CodeMirror.on(input, 'change', format);
    </script>
  </body>
</html>
